
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <title>
    Results for wallet: <%= mainData.address%>
  </title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet" />
  <link href="/demo.css" rel="stylesheet" />
</head>

<body class="">
  <div class="wrapper">

    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
                <a class="navbar-brand" href="javascript:void(0)" style="padding-top: 60px">Wallet nº <%= mainData.address%></a><br>
                <a class="navbar-brand" href="javascript:void(0)" style="padding-top: 120px">Balance <%= mainData.balanceEth%>Ξ</a>

          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">

          </button>
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">

              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <i class="tim-icons icon-simple-remove"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- End Navbar -->
      <div class="content">
        <div class="row">
          <div class="col-12">
            <div class="card card-chart">
              <div class="card-header ">
                <div class="row">
                  <div class="col-sm-6 text-left">
                    <h5 class="card-category">Total transactions & eth used</h5>
                    <h2 class="card-title"><%= mainData.transactions + mainData.errors %> & <%= mainData.ethUsed %>Ξ </h2>
                  </div>
                  <div class="col-sm-6">
                    <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                      <label class="btn btn-sm btn-primary btn-simple active" id="0">
                        <input type="radio" name="options" checked>
                        <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Transaction</span>
                        <span class="d-block d-sm-none">
                          <i class="tim-icons icon-single-02"></i>
                        </span>
                      </label>
                      <label class="btn btn-sm btn-primary btn-simple" id="1">
                        <input type="radio" class="d-none d-sm-none" name="options">
                        <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Eth</span>
                        <span class="d-block d-sm-none">
                          <i class="tim-icons icon-gift-2"></i>
                        </span>
                      </label>
                      <label class="btn btn-sm btn-primary btn-simple" id="2">
                        <input type="radio" class="d-none" name="options">
                        <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Eth per Tr</span>
                        <span class="d-block d-sm-none">
                          <i class="tim-icons icon-tap-02"></i>
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="chartMain"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">

          <div class="col-lg-5">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">Total in and out | transactions</h5>
                <h3 class="card-title"><%= mainData.inT %> INs & <%= mainData.outT %> OUTs </h3>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="chartLineTransactions"></canvas>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-5">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">Total in and out | ether used</h5>
                <h3 class="card-title"><%= mainData.inEth %>Ξ INs & <%= mainData.outEth %>Ξ OUTs </h3>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="chartLineInOut"></canvas>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-2">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">Succesful transactions & errors</h5>
                <h3 class="card-title"> <%= mainData.transactions %> Succesful & <%= mainData.errors %> Errors </h3>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="chartLineGreen"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-12">
            <div class="card card-tasks">
              <div class="card-header ">
                <h6 class="title d-inline">Wallets</h6>

              </div>
              <div class="card-body ">
                <div class="table-full-width table-responsive">
                  <table class="table">
                    <tbody>


                        <% walletsID.forEach(item => { %><tr class="walletsID"><td><div class="form-check"><label class="form-check-label">Wallet ID</label></div></td><td id="<%=item[0].id%>"><%=item[0].id%></td></tr><% });%>


                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>


          <div class="col-lg-6 col-md-12">
            <div class="card card-data">
              <div class="card-header">
                <h4 class="card-title"> Transactions data</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table tablesorter " id="">
                    <thead class=" text-primary">
                      <tr>
                        <th>
                          Wallet ID
                        </th>
                        <th>
                          Amount (Ether)
                        </th>
                        <th>
                          Date
                        </th>

                      </tr>
                    </thead>
                    <thead class=" text-primary">
                      <tr>
                        <th>
                         Hash
                        </th>
                        <th>
                          Block
                        </th>
                        <th>
                          Condition
                        </th>

                      </tr>
                    </thead>
                    <tbody id="walletData">


                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--   Core JS Files   -->
  <script src="/js/core/jquery.min.js"></script>
  <script src="/js/core/popper.min.js"></script>
  <script src="/js/core/bootstrap.min.js"></script>

  <!-- Chart JS -->
  <script src="/js/plugins/chartjs.min.js"></script>
  <script>

    var wallets = <%- JSON.stringify(walletsID) %>;
    wallets.forEach((item, i) => {
      document.getElementById(item[0].id).onclick=function(){
        document.getElementById("walletData").innerHTML = "";
        item.forEach((item, i) => {
          if (!item.date) {
          } else {
            document.getElementById("walletData").innerHTML += '<tr><td>'+ item.contactWallet +'</td><td>' + item.eth + '</td><td>' + item.date + '</td></tr>' + '<td style="border-top-width: 0px;">'+ item.hash +'</td><td style="border-top-width: 0px;">' + item.block + '</td><td style="border-top-width: 0px;" class="'+ item.condition + '">' + item.condition + '</td>';
          }
        });
      };
    });



    type = ['primary', 'info', 'success', 'warning', 'danger'];

    demo = {
      initPickColor: function() {
        $('.pick-class-label').click(function() {
          var new_class = $(this).attr('new-class');
          var old_class = $('#display-buttons').attr('data-class');
          var display_div = $('#display-buttons');
          if (display_div.length) {
            var display_buttons = display_div.find('.btn');
            display_buttons.removeClass(old_class);
            display_buttons.addClass(new_class);
            display_div.attr('data-class', new_class);
          }
        });
      },

      initDocChart: function() {
        chartColor = "#FFFFFF";

        // General configuration for the charts with Line gradientStroke
        gradientChartOptionsConfiguration = {
          maintainAspectRatio: false,
          legend: {
            display: false
          },
          tooltips: {
            bodySpacing: 4,
            mode: "nearest",
            intersect: 0,
            position: "nearest",
            xPadding: 10,
            yPadding: 10,
            caretPadding: 10
          },
          responsive: true,
          scales: {
            yAxes: [{
              display: 0,
              gridLines: 0,
              ticks: {
                display: false
              },
              gridLines: {
                zeroLineColor: "transparent",
                drawTicks: false,
                display: false,
                drawBorder: false
              }
            }],
            xAxes: [{
              display: 0,
              gridLines: 0,
              ticks: {
                display: false
              },
              gridLines: {
                zeroLineColor: "transparent",
                drawTicks: false,
                display: false,
                drawBorder: false
              }
            }]
          },
          layout: {
            padding: {
              left: 0,
              right: 0,
              top: 15,
              bottom: 15
            }
          }
        };

        ctx = document.getElementById('lineChartExample').getContext("2d");

        gradientStroke = ctx.createLinearGradient(500, 0, 100, 0);
        gradientStroke.addColorStop(0, '#80b6f4');
        gradientStroke.addColorStop(1, chartColor);

        gradientFill = ctx.createLinearGradient(0, 170, 0, 50);
        gradientFill.addColorStop(0, "rgba(128, 182, 244, 0)");
        gradientFill.addColorStop(1, "rgba(249, 99, 59, 0.40)");


      },

      initDashboardPageCharts: function() {


        gradientChartOptionsConfigurationWithTooltipPurple = {
          maintainAspectRatio: false,
          legend: {
            display: false
          },

          tooltips: {
            backgroundColor: '#f5f5f5',
            titleFontColor: '#333',
            bodyFontColor: '#666',
            bodySpacing: 4,
            xPadding: 12,
            mode: "nearest",
            intersect: 0,
            position: "nearest"
          },
          responsive: true,
          scales: {
            yAxes: [{
              barPercentage: 1.6,
              gridLines: {
                drawBorder: false,
                color: 'rgba(29,140,248,0.0)',
                zeroLineColor: "transparent",
              },
              ticks: {
                suggestedMin: 0,
                padding: 20,
                fontColor: "#9a9a9a"
              }
            }],

            xAxes: [{
              barPercentage: 1.6,
              gridLines: {
                drawBorder: false,
                color: 'rgba(225,78,202,0.1)',
                zeroLineColor: "transparent",
              },
              ticks: {
                padding: 20,
                fontColor: "#9a9a9a"
              }
            }]
          }
        };

        gradientChartOptionsConfigurationWithTooltipOrange = {
          maintainAspectRatio: false,
          legend: {
            display: false
          },

          tooltips: {
            backgroundColor: '#f5f5f5',
            titleFontColor: '#333',
            bodyFontColor: '#666',
            bodySpacing: 4,
            xPadding: 12,
            mode: "nearest",
            intersect: 0,
            position: "nearest"
          },
          responsive: true,
          scales: {
            yAxes: [{
              barPercentage: 1.6,
              gridLines: {
                drawBorder: false,
                color: 'rgba(29,140,248,0.0)',
                zeroLineColor: "transparent",
              },
              ticks: {
                suggestedMin: 50,
                suggestedMax: 110,
                padding: 20,
                fontColor: "#ff8a76"
              }
            }],

            xAxes: [{
              barPercentage: 1.6,
              gridLines: {
                drawBorder: false,
                color: 'rgba(220,53,69,0.1)',
                zeroLineColor: "transparent",
              },
              ticks: {
                padding: 20,
                fontColor: "#ff8a76"
              }
            }]
          }
        };

        gradientChartOptionsConfigurationWithTooltipGreen = {
          maintainAspectRatio: false,
          legend: {
            display: false
          },

          tooltips: {
            backgroundColor: '#f5f5f5',
            titleFontColor: '#333',
            bodyFontColor: '#666',
            bodySpacing: 4,
            xPadding: 12,
            mode: "nearest",
            intersect: 0,
            position: "nearest"
          },
          responsive: true,
        };


        gradientBarChartConfiguration = {
          maintainAspectRatio: false,
          legend: {
            display: false
          },

          tooltips: {
            backgroundColor: '#f5f5f5',
            titleFontColor: '#333',
            bodyFontColor: '#666',
            bodySpacing: 4,
            xPadding: 12,
            mode: "nearest",
            intersect: 0,
            position: "nearest"
          },
          responsive: true,
          scales: {
            yAxes: [{

              gridLines: {
                drawBorder: false,
                color: 'rgba(29,140,248,0.1)',
                zeroLineColor: "transparent",
              },
              ticks: {
                suggestedMin: 60,
                suggestedMax: 120,
                padding: 20,
                fontColor: "#9e9e9e"
              }
            }],

            xAxes: [{

              gridLines: {
                drawBorder: false,
                color: 'rgba(29,140,248,0.1)',
                zeroLineColor: "transparent",
              },
              ticks: {
                padding: 20,
                fontColor: "#9e9e9e"
              }
            }]
          }
        };

        var ctx = document.getElementById("chartLineTransactions").getContext("2d");

        var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

        gradientStroke.addColorStop(1, 'rgba(72,72,176,0.2)');
        gradientStroke.addColorStop(0.2, 'rgba(72,72,176,0.0)');
        gradientStroke.addColorStop(0, 'rgba(119,52,169,0)');

        var data = {
          labels:[<% datesID.forEach(item => { %>"<%=item[0].date%>",<% });%>],
          datasets: [{
            label: "IN",
            fill: true,
            backgroundColor: 'rgba(38, 112, 181,0.4)',
            borderColor: '#2670b5',
            borderWidth: 1,
            borderDash: [],
            borderDashOffset: 0.0,
            pointBackgroundColor: '#2670b5',
            pointBorderColor: 'rgba(255,255,255,0)',
            pointHoverBackgroundColor: '#2670b5',
            pointBorderWidth: 20,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 15,
            pointRadius: 1,
            data: [<% datesID.forEach(item => { %>"<%=item[0].in%>",<% });%>],
          }, {
            label: "OUT",
            fill: true,
            backgroundColor: 'rgba(181, 114, 38,0.4)',
            borderColor: '#b57226',
            borderWidth: 1,
            borderDash: [],
            borderDashOffset: 0.0,
            pointBackgroundColor: '#b57226',
            pointBorderColor: 'rgba(255,255,255,0)',
            pointHoverBackgroundColor: '#b57226',
            pointBorderWidth: 20,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 15,
            pointRadius: 1,
            data: [<% datesID.forEach(item => { %>"<%=item[0].out%>",<% });%>],
          }]
        };

        var myChart = new Chart(ctx, {
          type: 'line',
          data: data,
          options: gradientChartOptionsConfigurationWithTooltipPurple
        });

        var ctx = document.getElementById("chartLineInOut").getContext("2d");

        var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

        gradientStroke.addColorStop(1, 'rgba(72,72,176,0.2)');
        gradientStroke.addColorStop(0.2, 'rgba(72,72,176,0.0)');
        gradientStroke.addColorStop(0, 'rgba(119,52,169,0)');

        var data = {
          labels:[<% datesID.forEach(item => { %>"<%=item[0].date%>",<% });%>],
          datasets: [{
            label: "IN",
            fill: true,
            backgroundColor: 'rgba(38, 112, 181,0.4)',
            borderColor: '#2670b5',
            borderWidth: 2,
            borderDash: [],
            borderDashOffset: 0.0,
            pointBackgroundColor: '#2670b5',
            pointBorderColor: 'rgba(255,255,255,0)',
            pointHoverBackgroundColor: '#2670b5',
            pointBorderWidth: 20,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 15,
            pointRadius: 1,
            data: [<% datesID.forEach(item => { %>"<%=item[0].inQuantity%>",<% });%>],
          }, {
            label: "OUT",
            fill: true,
            backgroundColor: 'rgba(181, 114, 38,0.4)',
            borderColor: '#b57226',
            borderWidth: 2,
            borderDash: [],
            borderDashOffset: 0.0,
            pointBackgroundColor: '#b57226',
            pointBorderColor: 'rgba(255,255,255,0)',
            pointHoverBackgroundColor: '#b57226',
            pointBorderWidth: 20,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 15,
            pointRadius: 1,
            data: [<% datesID.forEach(item => { %>"<%=item[0].outQuantity%>",<% });%>],
          }]
        };

        var myChart = new Chart(ctx, {
          type: 'bar',
          data: data,
          options: gradientChartOptionsConfigurationWithTooltipPurple
        });
        var ctxGreen = document.getElementById("chartLineGreen").getContext("2d");

        var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

        gradientStroke.addColorStop(1, 'rgba(66,134,121,0.15)');
        gradientStroke.addColorStop(0.4, 'rgba(66,134,121,0.0)');
        gradientStroke.addColorStop(0, 'rgba(66,134,121,0)');

        var data = {
          labels: ['Successful', 'Errors'],
          datasets: [{
            label: "Errors & successful transactions",
            fill: true,
            backgroundColor:[ 'rgba(38, 112, 181,0.4)', 'rgba(181, 114, 38,0.4)'],
            borderColor: [ 'rgba(38, 112, 181,0.9)', 'rgba(181, 114, 38,0.9)'],
            borderWidth: 1,
            borderDash: [],
            borderDashOffset: 0.0,
            data:[<%= mainData.transactions%>, <%= mainData.errors%>],
          }]
        };

        var myChart = new Chart(ctxGreen, {
          type: 'doughnut',
          data: data,
          options: gradientChartOptionsConfigurationWithTooltipGreen

        });



        var chart_labels =  [<% datesID.forEach(item => { %>"<%=item[0].date%>",<% });%>];
        var chart_data = [<% datesID.forEach(item => { %>"<%=item[0].quantity%>",<% });%>];


        var ctx = document.getElementById("chartMain").getContext('2d');

        var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

        gradientStroke.addColorStop(1, 'rgba(72,72,176,0.1)');
        gradientStroke.addColorStop(0.4, 'rgba(72,72,176,0.0)');
        gradientStroke.addColorStop(0, 'rgba(119,52,169,0)');
        var config = {
          type: 'line',
          data: {
            labels: chart_labels,
            datasets: [{
              label: "Value",
              fill: true,
              backgroundColor: 'rgba(211, 70, 177,0.4)',
              borderColor: '#d346b1',
              borderWidth: 1,
              borderDash: [],
              borderDashOffset: 0.0,
              pointBackgroundColor: '#d346b1',
              pointBorderColor: 'rgba(255,255,255,0)',
              pointHoverBackgroundColor: '#d346b1',
              pointBorderWidth: 20,
              pointHoverRadius: 4,
              pointHoverBorderWidth: 15,
              pointRadius: 1,
              data: chart_data,
            }]
          },
          options: gradientChartOptionsConfigurationWithTooltipPurple
        };
        var myChartData = new Chart(ctx, config);
        $("#0").click(function() {
          var data = myChartData.config.data;
          data.datasets[0].data = chart_data;
          data.labels = chart_labels;
          myChartData.update();
        });
        $("#1").click(function() {
          var chart_data = [<% datesID.forEach(item => { %><%=item[0].ethAmount%>,<% });%>];
          var data = myChartData.config.data;
          data.datasets[0].data = chart_data;
          data.labels = chart_labels;
          myChartData.update();
        });

        $("#2").click(function() {
          var chart_data = [<% datesID.forEach(item => { %>(<%=item[0].ethAmount%> / <%=item[0].quantity%>),<% });%>];
          var data = myChartData.config.data;
          data.datasets[0].data = chart_data;
          data.labels = chart_labels;
          myChartData.update();
        });
      },

    };

    $(document).ready(function() {
      // Javascript method's body can be found in assets/js/demos.js
      demo.initDashboardPageCharts();

    });
  </script>
</body>
</html>
